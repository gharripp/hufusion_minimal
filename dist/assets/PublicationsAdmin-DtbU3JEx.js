import{c as A,b as I,r,j as e,E as L}from"./index-CTVhykcm.js";import{f as q,F as O,u as U,c as Y,d as $}from"./publicationService--wxd3cTs.js";import{P as M,T as V}from"./trash-2-J_1AeUpT.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=A("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);function B(){const{user:y,signIn:j,signOut:f}=I(),[v,N]=r.useState([]),[w,c]=r.useState(!0),[x,i]=r.useState(!1),[n,u]=r.useState(null),[a,s]=r.useState({type:"publication",title:"",authors:"",year:new Date().getFullYear(),journal:"",doi:"",venue:"",presentationType:"poster"}),[k,o]=r.useState(null),[m,h]=r.useState(!1),[b,P]=r.useState(""),[p,C]=r.useState("");r.useEffect(()=>{d()},[]);const d=async()=>{c(!0);const t=await q();N(t),c(!1)},F=async t=>{t.preventDefault(),h(!0);try{const l={...a,pdf:k||void 0};n?await U(n,l):await Y(l),await d(),g()}catch(l){console.error("Error saving publication:",l),alert("Failed to save publication")}finally{h(!1)}},S=t=>{u(t.id),s({type:t.type,title:t.title,authors:t.authors,year:t.year,journal:t.journal||"",doi:t.doi||"",venue:t.venue||"",presentationType:t.presentationType||"poster"}),o(null),i(!0)},T=async(t,l)=>{if(confirm("Are you sure you want to delete this item?"))try{await $(t,l),await d()}catch(D){console.error("Error deleting publication:",D),alert("Failed to delete publication")}},g=()=>{i(!1),u(null),s({type:"publication",title:"",authors:"",year:new Date().getFullYear(),journal:"",doi:"",venue:"",presentationType:"poster"}),o(null)},E=async t=>{t.preventDefault();try{await j(b,p)}catch{alert("Login failed. Please check your credentials.")}};return y?e.jsx("div",{className:"min-h-screen bg-black pt-20 pb-16",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-white",children:"Publications & Presentations Admin"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("button",{onClick:()=>i(!x),className:"bg-hampton-blue hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center",children:[e.jsx(_,{className:"w-5 h-5 mr-2"}),"Add New"]}),e.jsx("button",{onClick:()=>f(),className:"bg-gray-700 hover:bg-gray-600 text-white px-4 py-2 rounded-lg",children:"Sign Out"})]})]}),x&&e.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 mb-8",children:[e.jsxs("h2",{className:"text-2xl font-bold text-white mb-4",children:[n?"Edit":"Add"," Publication/Presentation"]}),e.jsxs("form",{onSubmit:F,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Type"}),e.jsxs("select",{value:a.type,onChange:t=>s({...a,type:t.target.value}),className:"w-full px-4 py-2 bg-black border border-gray-700 rounded-lg text-white",required:!0,children:[e.jsx("option",{value:"publication",children:"Publication"}),e.jsx("option",{value:"presentation",children:"Presentation"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Title *"}),e.jsx("input",{type:"text",value:a.title,onChange:t=>s({...a,title:t.target.value}),className:"w-full px-4 py-2 bg-black border border-gray-700 rounded-lg text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Authors *"}),e.jsx("input",{type:"text",value:a.authors,onChange:t=>s({...a,authors:t.target.value}),placeholder:"Last, First; Last, First; etc.",className:"w-full px-4 py-2 bg-black border border-gray-700 rounded-lg text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Year *"}),e.jsx("input",{type:"number",value:a.year,onChange:t=>s({...a,year:parseInt(t.target.value)}),className:"w-full px-4 py-2 bg-black border border-gray-700 rounded-lg text-white",required:!0})]}),a.type==="publication"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Journal"}),e.jsx("input",{type:"text",value:a.journal,onChange:t=>s({...a,journal:t.target.value}),className:"w-full px-4 py-2 bg-black border border-gray-700 rounded-lg text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"DOI"}),e.jsx("input",{type:"text",value:a.doi,onChange:t=>s({...a,doi:t.target.value}),placeholder:"10.xxxx/xxxxx",className:"w-full px-4 py-2 bg-black border border-gray-700 rounded-lg text-white"})]})]}),a.type==="presentation"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Venue"}),e.jsx("input",{type:"text",value:a.venue,onChange:t=>s({...a,venue:t.target.value}),placeholder:"Conference name, location",className:"w-full px-4 py-2 bg-black border border-gray-700 rounded-lg text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Presentation Type"}),e.jsxs("select",{value:a.presentationType,onChange:t=>s({...a,presentationType:t.target.value}),className:"w-full px-4 py-2 bg-black border border-gray-700 rounded-lg text-white",children:[e.jsx("option",{value:"poster",children:"Poster"}),e.jsx("option",{value:"oral",children:"Oral"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"PDF"}),e.jsx("input",{type:"file",accept:".pdf",onChange:t=>{var l;return o(((l=t.target.files)==null?void 0:l[0])||null)},className:"w-full px-4 py-2 bg-black border border-gray-700 rounded-lg text-white"})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("button",{type:"submit",disabled:m,className:"bg-hampton-blue hover:bg-blue-700 text-white px-6 py-2 rounded-lg disabled:opacity-50",children:m?"Saving...":n?"Update":"Create"}),e.jsx("button",{type:"button",onClick:g,className:"bg-gray-700 hover:bg-gray-600 text-white px-6 py-2 rounded-lg",children:"Cancel"})]})]})]}),w?e.jsx("div",{className:"text-center text-gray-400",children:"Loading..."}):e.jsx("div",{className:"space-y-4",children:v.map(t=>e.jsx("div",{className:"bg-gray-900 rounded-lg p-6",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold mr-2 ${t.type==="publication"?"bg-blue-900 text-blue-300":"bg-purple-900 text-purple-300"}`,children:t.type==="publication"?"Publication":`Presentation (${t.presentationType})`}),e.jsx("span",{className:"text-gray-400 text-sm",children:t.year})]}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:t.title}),e.jsx("p",{className:"text-gray-300 mb-2",children:t.authors}),t.journal&&e.jsx("p",{className:"text-gray-400 text-sm mb-1",children:e.jsx("em",{children:t.journal})}),t.venue&&e.jsx("p",{className:"text-gray-400 text-sm mb-1",children:t.venue}),t.doi&&e.jsxs("a",{href:`https://doi.org/${t.doi}`,target:"_blank",rel:"noopener noreferrer",className:"text-hampton-blue text-sm hover:underline flex items-center",children:["DOI: ",t.doi," ",e.jsx(L,{className:"w-3 h-3 ml-1"})]}),t.pdfUrl&&e.jsxs("a",{href:t.pdfUrl,target:"_blank",rel:"noopener noreferrer",className:"text-hampton-blue text-sm hover:underline flex items-center mt-1",children:[e.jsx(O,{className:"w-4 h-4 mr-1"}),"View PDF"]})]}),e.jsxs("div",{className:"flex space-x-2 ml-4",children:[e.jsx("button",{onClick:()=>S(t),className:"p-2 bg-gray-800 hover:bg-gray-700 rounded-lg text-white",children:e.jsx(M,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>T(t.id,t.pdfUrl),className:"p-2 bg-red-900 hover:bg-red-800 rounded-lg text-white",children:e.jsx(V,{className:"w-5 h-5"})})]})]})},t.id))})]})}):e.jsx("div",{className:"min-h-screen bg-black pt-20 pb-16 flex items-center justify-center",children:e.jsxs("div",{className:"max-w-md w-full bg-gray-900 rounded-lg p-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-6 text-center",children:"Publications Admin"}),e.jsxs("form",{onSubmit:E,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email"}),e.jsx("input",{type:"email",value:b,onChange:t=>P(t.target.value),className:"w-full px-4 py-2 bg-black border border-gray-700 rounded-lg text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Password"}),e.jsx("input",{type:"password",value:p,onChange:t=>C(t.target.value),className:"w-full px-4 py-2 bg-black border border-gray-700 rounded-lg text-white",required:!0})]}),e.jsx("button",{type:"submit",className:"w-full bg-hampton-blue hover:bg-blue-700 text-white py-2 rounded-lg font-semibold",children:"Sign In"})]})]})})}export{B as default};
