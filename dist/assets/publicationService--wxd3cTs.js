import{c as y,q as h,d as l,e as o,o as w,g as b,T as c,h as p,i as s,k as g,l as u,s as d,m,p as D,t as E,v as P}from"./index-CTVhykcm.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=y("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),a="publications";async function k(){try{const r=h(l(o,a),w("year","desc"));return(await b(r)).docs.map(e=>({id:e.id,...e.data()}))}catch(r){return console.error("Error fetching publications:",r),[]}}async function f(r,t){try{const e=r.name.split(".").pop(),n=`publications/${t}.${e}`,i=u(d,n);return await E(i,r),P(i)}catch(e){throw console.error("Error uploading PDF:",e),new Error(`PDF upload failed: ${e instanceof Error?e.message:"Unknown error"}`)}}async function U(r){try{const t=await g(l(o,a),{type:r.type,title:r.title,authors:r.authors,year:r.year,journal:r.journal||null,doi:r.doi||null,venue:r.venue||null,presentationType:r.presentationType||null,pdfUrl:"",createdAt:c.now(),updatedAt:c.now()});if(r.pdf){const e=await f(r.pdf,t.id);await p(s(o,a,t.id),{pdfUrl:e})}return t.id}catch(t){throw console.error("Error creating publication:",t),t}}async function v(r,t){try{const e={...t,updatedAt:c.now()};if(t.pdf){const n=await f(t.pdf,r);e.pdfUrl=n}e.pdf instanceof File&&delete e.pdf,await p(s(o,a,r),e)}catch(e){throw console.error("Error updating publication:",e),e}}async function L(r,t){try{if(t)try{const e=u(d,t);await m(e)}catch(e){console.warn("Error deleting PDF:",e)}await D(s(o,a,r))}catch(e){throw console.error("Error deleting publication:",e),e}}export{T as F,U as c,L as d,k as f,v as u};
