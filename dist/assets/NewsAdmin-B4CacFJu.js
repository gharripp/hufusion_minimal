import{c as b,b as T,r as s,f as O,j as e,L as Y,X as $,w as B,x as H,y as V}from"./index-CTVhykcm.js";import{U as X}from"./upload-CPGzn_z8.js";import{P as G,T as J}from"./trash-2-J_1AeUpT.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=b("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=b("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=b("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);function te(){const{user:k,signIn:C,signOut:S}=T(),[A,L]=s.useState([]),[E,p]=s.useState(!0),[d,j]=s.useState(!1),[u,n]=s.useState(null),[y,P]=s.useState(""),[f,z]=s.useState(""),[w,x]=s.useState(!1),[c,h]=s.useState(null),[a,r]=s.useState({title:"",excerpt:"",content:"",author:"",category:"research"}),[F,o]=s.useState(null),[v,i]=s.useState("");s.useEffect(()=>{m()},[]);const m=async()=>{p(!0);const t=await O();L(t),p(!1)},I=async t=>{t.preventDefault();try{await C(y,f)}catch{alert("Login failed. Please check your credentials.")}},D=t=>{var N;const l=(N=t.target.files)==null?void 0:N[0];if(l){o(l);const g=new FileReader;g.onloadend=()=>{i(g.result)},g.readAsDataURL(l)}else o(null),i("")},q=async t=>{t.preventDefault(),j(!0),n(null);try{const l={...a,image:F||void 0};c?(await B(c,l),n({type:"success",text:"Article updated successfully! You can close this form or edit again."})):(await H(l),n({type:"success",text:"Article created successfully! You can close this form or create another."})),await m(),r({title:"",excerpt:"",content:"",author:"",category:"research"}),o(null),i(""),h(null)}catch(l){console.error("Error saving article:",l),n({type:"error",text:`Error: ${l.message||"Failed to save article. Check console for details."}`})}finally{j(!1)}},M=t=>{h(t.id),r({title:t.title,excerpt:t.excerpt,content:t.content,author:t.author,category:t.category}),i(t.image||""),x(!0)},U=async t=>{if(window.confirm("Are you sure you want to delete this article?"))try{await V(t.id,t.image),await m()}catch{alert("Error deleting article. Please try again.")}},R=()=>{r({title:"",excerpt:"",content:"",author:"",category:"research"}),o(null),i(""),h(null),x(!1),n(null)};return k?e.jsx("div",{className:"min-h-screen bg-black text-white pt-24 pb-8 px-8",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"News Administration"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("button",{onClick:()=>x(!w),className:"bg-hampton-blue hover:bg-blue-700 text-white font-bold py-2 px-4 rounded flex items-center gap-2",children:[e.jsx(Q,{size:20}),"Add News"]}),e.jsxs(Y,{to:"/admin/import",className:"bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded flex items-center gap-2",children:[e.jsx(X,{size:20}),"Batch Import"]}),e.jsx("button",{onClick:()=>S(),className:"bg-gray-700 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded",children:"Logout"})]})]}),w&&e.jsxs("div",{className:"bg-gray-900 p-6 rounded-lg mb-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:c?"Edit Article":"New Article"}),e.jsx("button",{onClick:R,className:"text-gray-400 hover:text-white",disabled:d,children:e.jsx($,{size:24})})]}),u&&e.jsx("div",{className:`mb-4 p-3 rounded ${u.type==="success"?"bg-green-900/50 text-green-200 border border-green-700":"bg-red-900/50 text-red-200 border border-red-700"}`,children:u.text}),e.jsxs("form",{onSubmit:q,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2",children:"Title"}),e.jsx("input",{type:"text",value:a.title,onChange:t=>r({...a,title:t.target.value}),className:"w-full p-2 bg-gray-800 rounded",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2",children:"Excerpt"}),e.jsx("textarea",{value:a.excerpt,onChange:t=>r({...a,excerpt:t.target.value}),className:"w-full p-2 bg-gray-800 rounded h-20",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2",children:"Content"}),e.jsx("textarea",{value:a.content,onChange:t=>r({...a,content:t.target.value}),className:"w-full p-2 bg-gray-800 rounded h-40",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2",children:"Author"}),e.jsx("input",{type:"text",value:a.author,onChange:t=>r({...a,author:t.target.value}),className:"w-full p-2 bg-gray-800 rounded",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2",children:"Category"}),e.jsxs("select",{value:a.category,onChange:t=>r({...a,category:t.target.value}),className:"w-full p-2 bg-gray-800 rounded",children:[e.jsx("option",{value:"research",children:"Research"}),e.jsx("option",{value:"awards",children:"Awards"}),e.jsx("option",{value:"outreach",children:"Outreach"}),e.jsx("option",{value:"collaboration",children:"Collaboration"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2",children:"Image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:D,className:"w-full p-2 bg-gray-800 rounded"}),v&&e.jsx("img",{src:v,alt:"Preview",className:"mt-4 max-h-48 rounded"})]}),e.jsx("button",{type:"submit",disabled:d,className:"bg-hampton-blue hover:bg-blue-700 text-white font-bold py-2 px-6 rounded flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:d?e.jsxs(e.Fragment,{children:[e.jsx(K,{size:20,className:"animate-spin"}),c?"Updating...":"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(W,{size:20}),c?"Update":"Create"," Article"]})})]})]}),E?e.jsx("div",{className:"text-center",children:"Loading..."}):e.jsx("div",{className:"space-y-4",children:A.map(t=>e.jsxs("div",{className:"bg-gray-900 p-6 rounded-lg flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-bold mb-2",children:t.title}),e.jsx("p",{className:"text-gray-400 mb-2",children:t.excerpt}),e.jsxs("div",{className:"text-sm text-gray-500",children:[t.date," • ",t.author," • ",t.category]})]}),t.image&&e.jsx("img",{src:t.image,alt:t.title,className:"w-32 h-32 object-cover rounded ml-4"}),e.jsxs("div",{className:"flex gap-2 ml-4",children:[e.jsx("button",{onClick:()=>M(t),className:"bg-blue-600 hover:bg-blue-700 text-white p-2 rounded",children:e.jsx(G,{size:18})}),e.jsx("button",{onClick:()=>U(t),className:"bg-red-600 hover:bg-red-700 text-white p-2 rounded",children:e.jsx(J,{size:18})})]})]},t.id))})]})}):e.jsx("div",{className:"min-h-screen bg-black text-white flex items-center justify-center",children:e.jsxs("form",{onSubmit:I,className:"bg-gray-900 p-8 rounded-lg max-w-md w-full",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Admin Login"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-2",children:"Email"}),e.jsx("input",{type:"email",value:y,onChange:t=>P(t.target.value),className:"w-full p-2 bg-gray-800 rounded",required:!0})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block mb-2",children:"Password"}),e.jsx("input",{type:"password",value:f,onChange:t=>z(t.target.value),className:"w-full p-2 bg-gray-800 rounded",required:!0})]}),e.jsx("button",{type:"submit",className:"w-full bg-hampton-blue hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"Login"})]})})}export{te as default};
